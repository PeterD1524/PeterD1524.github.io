<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700|Noto+Sans+TC:400,700">
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {

      matchTable = [];

      const point_layer = document.getElementById('point_layer');
      const map_layer = document.getElementById('map_layer');
      const grid_layer = document.getElementById('grid_layer');
      point_layer.width = 1000;
      point_layer.height = 1000;
      map_layer.width = 1000;
      map_layer.height = 1000;
      grid_layer.width = 1000;
      grid_layer.height = 1000;

      const grid_layer_ctx = grid_layer.getContext('2d');

      const gridButton = document.getElementById('gridButton');
      gridButton.addEventListener('click', function () {
        if (grid_layer.style.display === 'inline') {
          grid_layer.style.display = 'none'
          gridButton.textContent = 'show grid';
        } else if (grid_layer.style.display === 'none') {
          grid_layer.style.display = 'inline';
          gridButton.textContent = 'hide grid';
        }
      })


      grid_layer_ctx.strokeStyle = 'gray';
      for (let i = 0; i <= grid_layer.width; i = i + 20) {
        grid_layer_ctx.beginPath();
        grid_layer_ctx.moveTo(i, 0);
        grid_layer_ctx.lineTo(i, grid_layer.height);
        grid_layer_ctx.stroke();
        grid_layer_ctx.beginPath();
        grid_layer_ctx.moveTo(0, i);
        grid_layer_ctx.lineTo(grid_layer.height, i);
        grid_layer_ctx.stroke();
      }
      grid_layer_ctx.strokeStyle = 'black';
      for (let i = 0; i <= grid_layer.width; i = i + 100) {
        grid_layer_ctx.beginPath();
        grid_layer_ctx.moveTo(i, 0);
        grid_layer_ctx.lineTo(i, grid_layer.height);
        grid_layer_ctx.stroke();
        grid_layer_ctx.beginPath();
        grid_layer_ctx.moveTo(0, i);
        grid_layer_ctx.lineTo(grid_layer.height, i);
        grid_layer_ctx.stroke();
      }

      const map_layer_ctx = map_layer.getContext('2d');
      map_layer_ctx.fillStyle = 'rgb(1, 55, 214)';
      map_layer_ctx.fillRect(0, 0, map_layer.width, map_layer.height);
      const image = new Image(1000, 1000);
      image.src = 'ggggg.png';
      image.onload = function () {
        map_layer_ctx.drawImage(this, 0, 0, this.width, this.height)
      };

      const ctx = point_layer.getContext('2d');

      const table = document.getElementById('table');

      // Load the Visualization API and the corechart package.
      google.charts.load('current', { 'packages': ['corechart'] });

      const ModeOption = ['Star', 'X', 'Y', 'Boss', 'Sub-Boss', 'Common', 'Uncommon', 'Biome', 'Where is', 'Combination', 'Free', 'Draw'];
      const header = ['', 'Star', 'X', 'Y', 'Boss', 'Sub-Boss', 'Common', 'Uncommon', 'Biome', 'Comment', 'Last Modified(UTC)'];
      const Mode = document.getElementById('Mode');
      const Values = document.getElementById('Values');
      const Values_divs = Values.querySelectorAll('#Values > div');
      const button = document.getElementById('button');
      const result = document.getElementById('result');
      let option;
      for (let i = 0; i < ModeOption.length; i++) {
        option = document.createElement('option');
        option.value = i;
        option.textContent = ModeOption[i];
        Mode.appendChild(option);
      }
      for (let i = 0; i < Values_divs.length; i++) {
        let datalist = document.createElement('datalist');
        datalist.id = 'Values_divs_datalist_' + i;
        Values_divs[i].appendChild(datalist);
        let input = Values_divs[i].querySelector('input');
        input.setAttribute('list', 'Values_divs_datalist_' + i);
      }

      Mode.addEventListener("change", ModechangeHandler);

      function ModechangeHandler(event) {
        if (event.target.value === 'Mode') {

        } else if (Number(event.target.value) === 11) {
          for (let i = 0; i < Values_divs.length; i++) {
            Values_divs[i].style.display = 'none';
            Values_divs[i].querySelector('input').value = "";
          }
          button.style.display = 'none';
          for (let i = 1; i < 3; i++) {
            Values_divs[i].querySelector('div').textContent = ModeOption[i];
            let datalist = Values_divs[i].querySelector('datalist');
            removeChildren(datalist);
          }

          for (let i = 0; i < matchTable.length; i++) {
            matchTable[i][0] = false;
          }

          for (let i = 0; i < table.querySelectorAll('input').length; i++) {
            table.querySelectorAll('input')[i].checked = false;
          }

          ctx.clearRect(0, 0, point_layer.width, point_layer.height);

          for (let i = 1; i < 3; i++) {
            Values_divs[i].style.display = 'block';
          }
          button.style.display = 'inline-block';
        } else {
          for (let i = 0; i < Values_divs.length; i++) {
            Values_divs[i].style.display = 'none';
            Values_divs[i].querySelector('input').value = "";
          }
          button.style.display = 'none';

          let gid = 158829331; // map

          if (0 <= Number(event.target.value) && Number(event.target.value) <= 8) {
            Values_divs[0].querySelector('div').textContent = 'Value';
            let datalist = Values_divs[0].querySelector('datalist');
            removeChildren(datalist);

            let column = 'A' + String.fromCharCode('A'.charCodeAt() + Number(event.target.value));
            let range = column + '2' + ':' + column;
            let query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/gviz/tq?gid=' + gid + '&range=' + range);

            query.send(function (response) {
              if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
              }

              let data = response.getDataTable();

              for (let i = 0; i < data.wg.length; i++) {
                if (data.wg[i].c[0] !== null) {
                  let option = document.createElement('option');
                  option.value = data.wg[i].c[0].v;
                  datalist.appendChild(option);
                }
              }

              Values_divs[0].style.display = 'block';
              button.style.display = 'inline-block';
            });
          } else if (Number(event.target.value) === 9) {
            for (let i = 0; i < 2; i++) {
              Values_divs[i].querySelector('div').textContent = ModeOption.slice(3 + 2 * i, 5 + 2 * i).join('/');
              let datalist = Values_divs[i].querySelector('datalist');
              removeChildren(datalist);
            }

            let column_start = 'A' + String.fromCharCode('A'.charCodeAt() + Number(event.target.value));
            let column_end = 'A' + String.fromCharCode('A'.charCodeAt() + Number(event.target.value) + 1);
            let range = column_start + '2' + ':' + column_end;
            let query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/gviz/tq?gid=' + gid + '&range=' + range);

            query.send(function (response) {
              if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
              }

              let data = response.getDataTable();

              for (let i = 0; i < data.wg.length; i++) {
                for (let j = 0; j < data.wg[i].c.length; j++) {
                  if (data.wg[i].c[j] !== null && data.wg[i].c[j].v !== null) {
                    let datalist = Values_divs[j].querySelector('datalist');
                    let option = document.createElement('option');
                    option.value = data.wg[i].c[j].v;
                    datalist.appendChild(option);
                  }
                }
              }

              for (let i = 0; i < 2; i++) {
                Values_divs[i].style.display = 'block';
              }
              button.style.display = 'inline-block';
            });
          } else if (Number(event.target.value) === 10) {
            for (let i = 0; i < Values_divs.length; i++) {
              Values_divs[i].querySelector('div').textContent = ModeOption[i];
              let datalist = Values_divs[i].querySelector('datalist');
              removeChildren(datalist);
            }

            let column_start = 'A' + String.fromCharCode('A'.charCodeAt());
            let column_end = 'A' + String.fromCharCode('A'.charCodeAt() + 7);
            let range = column_start + '2' + ':' + column_end;
            let query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/gviz/tq?gid=' + gid + '&range=' + range);

            query.send(function (response) {
              if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
              }

              let data = response.getDataTable();

              for (let i = 0; i < data.wg.length; i++) {
                for (let j = 0; j < data.wg[i].c.length; j++) {
                  if (data.wg[i].c[j] !== null && data.wg[i].c[j].v !== null) {
                    let datalist = Values_divs[j].querySelector('datalist');
                    let option = document.createElement('option');
                    option.value = data.wg[i].c[j].v;
                    datalist.appendChild(option);
                  }
                }
              }

              for (let i = 0; i < Values_divs.length; i++) {
                Values_divs[i].style.display = 'block';
              }
              button.style.display = 'inline-block';
            });
          }
        }
      }

      button.addEventListener("click", buttonclickHandler);

      function buttonclickHandler() {
        if (Mode.value === 'Mode') {

        } else if (Number(Mode.value) === 11) {
          ctx.clearRect(0, 0, point_layer.width, point_layer.height);
          drawPoint(Values_divs[1].querySelector('input').value, Values_divs[2].querySelector('input').value);
        } else {
          result.style.display = 'none';
          // point_layer.style.display = 'none';
          ctx.clearRect(0, 0, 1000, 1000);
          ctx.textAlign = 'center';
          ctx.font = '72px Roboto';
          ctx.fillStyle = 'red';
          ctx.fillText('Loading...', point_layer.width / 2, point_layer.height / 2);

          let gid = 1163096229;
          let range = 'A3:J';
          let query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/gviz/tq?gid=' + gid + '&range=' + range);
          query.send(function (response) {
            if (response.isError()) {
              alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
              return;
            }

            let data = response.getDataTable();

            dataTable = [];

            for (let i = 0; i < data.wg.length; i++) {
              dataTable.push([]);
              for (let j = 0; j < data.wg[i].c.length; j++) {
                if (data.wg[i].c[j] !== null && data.wg[i].c[j].v !== null) {
                  dataTable[i].push(data.wg[i].c[j].v);
                } else {
                  dataTable[i].push('');
                }
              }
            }

            removeChildren(table);

            matchTable = [];

            if (0 <= Number(Mode.value) && Number(Mode.value) <= 7) {
              for (let i = 0; i < dataTable.length; i++) {
                if (dataTable[i][Number(Mode.value)].toString().toLowerCase() === Values_divs[0].querySelector('input').value.toLowerCase()) {
                  matchTable.push([]);
                  matchTable[matchTable.length - 1].push(true);
                  for (let j = 0; j < dataTable[i].length; j++) {
                    matchTable[matchTable.length - 1].push(dataTable[i][j]);
                  }
                }
              }
            } else if (Number(Mode.value) === 8) {
              for (let i = 0; i < dataTable.length; i++) {
                let match = false;
                for (let j = 3; j <= 6; j++) {
                  if (dataTable[i][j].toString().toLowerCase() === Values_divs[0].querySelector('input').value.toLowerCase()) {
                    match = true;
                    break;
                  }
                }
                if (match === true) {
                  matchTable.push([]);
                  matchTable[matchTable.length - 1].push(true);
                  for (let j = 0; j < dataTable[i].length; j++) {
                    matchTable[matchTable.length - 1].push(dataTable[i][j]);
                  }
                }
              }
            } else if (Number(Mode.value) === 9) {
              let notEmpty = [true, true];
              let split = [null, null, null, null];
              let inputCorrect = true;
              for (let i = 0; i < 2; i++) {
                if (Values_divs[i].querySelector('input').value === '') {
                  notEmpty[i] = false;
                } else if (Values_divs[i].querySelector('input').value.toLowerCase().split('/').length === 2) {
                  split[0 + 2 * i] = Values_divs[i].querySelector('input').value.toLowerCase().split('/')[0];
                  split[1 + 2 * i] = Values_divs[i].querySelector('input').value.toLowerCase().split('/')[1];
                } else {
                  inputCorrect = false;
                  break;
                }
              }
              if (inputCorrect === true) {
                for (let i = 0; i < dataTable.length; i++) {
                  let match = true;
                  for (let j = 0; j < 2; j++) {
                    if (notEmpty[j] === true) {
                      for (let k = 0; k < 2; k++) {
                        if (dataTable[i][3 + 2 * j + k].toString().toLowerCase() !== split[2 * j + k]) {
                          match = false;
                        }
                      }
                    }
                  }
                  if (match === true) {
                    matchTable.push([]);
                    matchTable[matchTable.length - 1].push(true);
                    for (let j = 0; j < dataTable[i].length; j++) {
                      matchTable[matchTable.length - 1].push(dataTable[i][j]);
                    }
                  }
                }
              }
            } else if (Number(Mode.value) === 10) {
              for (let i = 0; i < dataTable.length; i++) {
                let match = true;
                for (let j = 0; j < Values_divs.length; j++) {
                  if (Values_divs[j].querySelector('input').value === '') {
                    continue;
                  }
                  if (dataTable[i][j].toString().toLowerCase() !== Values_divs[j].querySelector('input').value.toString().toLowerCase()) {
                    match = false;
                    break;
                  }
                }
                if (match === true) {
                  matchTable.push([]);
                  matchTable[matchTable.length - 1].push(true);
                  for (let j = 0; j < dataTable[i].length; j++) {
                    matchTable[matchTable.length - 1].push(dataTable[i][j]);
                  }
                }
              }
            }


            let sortOrder = [10, 9, 3, 2, 8, 7, 6, 5, 4, 1];

            for (let i = 0; i < sortOrder.length; i++) {
              matchTable.sort(function (a, b) {
                if (1 <= sortOrder[i] && sortOrder[i] <= 3) {
                  return a[sortOrder[i]] - b[sortOrder[i]];
                } else {
                  let nameA;
                  let nameB;
                  if (4 <= sortOrder[i] && sortOrder[i] <= 7) {
                    nameA = a[sortOrder[i]].toUpperCase(); // ignore upper and lowercase
                    nameB = b[sortOrder[i]].toUpperCase(); // ignore upper and lowercase
                  } else {
                    nameA = a[sortOrder[i]];
                    nameB = b[sortOrder[i]];
                  }
                  if (nameA < nameB) {
                    return -1;
                  }
                  if (nameA > nameB) {
                    return 1;
                  }

                  // names must be equal
                  return 0;
                }
              });
            }

            let sortAscending = [null, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]

            function sortHandler() {
              let j = indexOfChild(this);
              console.log(j);

              matchTable.sort(function (a, b) {
                if (1 <= j && j <= 3) {
                  return (a[j] - b[j]) * sortAscending[j];
                } else {
                  let nameA;
                  let nameB;
                  if (4 <= j && j <= 7) {
                    nameA = a[j].toUpperCase(); // ignore upper and lowercase
                    nameB = b[j].toUpperCase(); // ignore upper and lowercase
                  } else {
                    nameA = a[j];
                    nameB = b[j];
                  }
                  if (nameA < nameB) {
                    return -sortAscending[j];
                  }
                  if (nameA > nameB) {
                    return sortAscending[j];
                  }

                  // names must be equal
                  return 0;
                }
              });
              sortAscending[j] = sortAscending[j] * -1;
              removeChildren(table);
              createTable();
            }

            function createTable() {
              if (matchTable.length !== 0) {
                let tr = document.createElement('tr');
                for (let i = 0; i < header.length; i++) {
                  let td = document.createElement('td');
                  td.textContent = header[i];
                  if (i != 0) {
                    td.addEventListener('click', sortHandler);
                    if (sortAscending[i] == 1) {
                      td.title = 'Sort ascending';
                    } else {
                      td.title = 'Sort descending';
                    }
                  }
                  tr.appendChild(td);
                }
                tr.style.backgroundColor = '#78909c';
                tr.style.fontWeight = '700';
                table.appendChild(tr);
              }

              let alternatingColors = ['white', '#ebeff1']

              for (let i = 0; i < matchTable.length; i++) {
                tr = document.createElement('tr');
                let td = document.createElement('td');
                let input = document.createElement('input');
                input.type = 'checkbox';
                input.checked = matchTable[i][0];
                input.style.margin = '0';
                input.style.width = '20px';
                input.style.height = '20px';
                input.addEventListener('click', inputclickHandler);
                input.setAttribute('data-row', i);
                td.appendChild(input);
                tr.appendChild(td);
                for (let j = 1; j < matchTable[i].length; j++) {
                  td = document.createElement('td');
                  td.textContent = (matchTable[i][j]);
                  if (Number(Mode.value) === 8 && 4 <= j && j <= 7 && matchTable[i][j].toString().toLowerCase() === Values_divs[0].querySelector('input').value.toString().toLowerCase()) {
                    td.style.backgroundColor = 'coral';
                  }
                  else if (Number(Mode.value) === 10 && j < Values_divs.length + 1 && Values_divs[j - 1].querySelector('input').value.toString().toLowerCase() !== '' && matchTable[i][j].toString().toLowerCase() === Values_divs[j - 1].querySelector('input').value.toString().toLowerCase()) {
                    td.style.backgroundColor = 'coral';
                  }
                  tr.appendChild(td);
                }
                tr.style.backgroundColor = alternatingColors[i % 2];
                table.appendChild(tr);
              }
            }

            if (matchTable.length !== 0) {
              let tr = document.createElement('tr');
              for (let i = 0; i < header.length; i++) {
                let td = document.createElement('td');
                td.textContent = header[i];
                if (i != 0) {
                  td.addEventListener('click', sortHandler);
                  td.title = 'Sort ascending';
                }
                tr.appendChild(td);
              }
              tr.style.backgroundColor = '#78909c';
              tr.style.fontWeight = '700';
              table.appendChild(tr);
              ctx.clearRect(0, 0, 1000, 1000);
            } else {
              ctx.clearRect(0, 0, 1000, 1000);
              ctx.textAlign = 'center';
              ctx.font = '72px Roboto';
              ctx.fillStyle = 'red';
              ctx.fillText('No data or incorrect input', point_layer.width / 2, point_layer.height / 2);
            }

            let alternatingColors = ['white', '#ebeff1']

            for (let i = 0; i < matchTable.length; i++) {
              tr = document.createElement('tr');
              let td = document.createElement('td');
              let input = document.createElement('input');
              input.type = 'checkbox';
              input.checked = true;
              input.style.margin = '0';
              input.style.width = '20px';
              input.style.height = '20px';
              input.addEventListener('click', inputclickHandler);
              input.setAttribute('data-row', i);
              td.appendChild(input);
              tr.appendChild(td);
              for (let j = 1; j < matchTable[i].length; j++) {
                td = document.createElement('td');
                td.textContent = (matchTable[i][j]);
                if (Number(Mode.value) === 8 && 4 <= j && j <= 7 && matchTable[i][j].toString().toLowerCase() === Values_divs[0].querySelector('input').value.toString().toLowerCase()) {
                  td.style.backgroundColor = 'coral';
                }
                else if (Number(Mode.value) === 10 && j < Values_divs.length + 1 && Values_divs[j - 1].querySelector('input').value.toString().toLowerCase() !== '' && matchTable[i][j].toString().toLowerCase() === Values_divs[j - 1].querySelector('input').value.toString().toLowerCase()) {
                  td.style.backgroundColor = 'coral';
                }
                tr.appendChild(td);
              }
              tr.style.backgroundColor = alternatingColors[i % 2];
              table.appendChild(tr);
              drawPoint(matchTable[i][2], matchTable[i][3]);
            }

            if (matchTable.length !== 0) {
              result.style.display = 'block';
            }

            // point_layer.style.display = 'inline';
          });
        }
      }

      function inputclickHandler(event) {
        matchTable[Number(event.target.dataset.row)][0] = event.target.checked;
        if (Number(Mode.value) !== 11) {
          ctx.clearRect(0, 0, point_layer.width, point_layer.height);
        }
        for (let i = 0; i < matchTable.length; i++) {
          if (matchTable[i][0] === true) {
            drawPoint(matchTable[i][2], matchTable[i][3]);
          }
        }
      }

      function removeChildren(parent) {
        while (parent.firstChild) {
          parent.removeChild(parent.firstChild);
        }
      }

      function indexOfChild(child) {
        let parent = child.parentNode;
        return Array.prototype.indexOf.call(parent.children, child);
      }

      function drawPoint(x, y) {
        if (x !== '' && y !== '') {
          ctx.beginPath();
          ctx.arc(Number(x) + 500, -Number(y) + 500, 3, 0, Math.PI * 2);
          ctx.fillStyle = 'red';
          ctx.fill();
        }
      }

      function drawByCanvasCoordinate(x, y) {
        if (x !== '' && y !== '') {
          ctx.beginPath();
          ctx.arc(Number(x), Number(y), 3, 0, Math.PI * 2);
          ctx.fillStyle = 'red';
          ctx.fill();
        }
      }

      const log = document.getElementById('log');

      function getCursorPosition(canvas, event) {
        removeChildren(log);
        const rect = canvas.getBoundingClientRect();
        const x = Math.round(event.clientX - rect.left);
        const y = Math.round(event.clientY - rect.top);
        let mx = x - 500;
        let my = 500 - y;
        if (Number(Mode.value) === 11) {
          drawPoint(mx, my);
        }
        let div = document.createElement('div');
        let span = document.createElement('span');
        span.textContent = 'Click Response:';
        div.appendChild(span);
        div.appendChild(document.createElement('br'));
        span = document.createElement('span');
        span.textContent = 'Position: [' + mx + ', ' + my + ']';
        div.appendChild(span);
        log.appendChild(div);
        div = document.createElement('div');
        div.textContent = 'Nearby results:';
        log.appendChild(div);
        for (let i = 0; i < matchTable.length; i++) {
          if (matchTable[i][0] === true) {
            let mx = Number(matchTable[i][2]) + 500;
            let my = -Number(matchTable[i][3]) + 500;
            if (Math.pow((x - mx), 2) + Math.pow((y - my), 2) <= Math.pow(4, 2)) {
              let div = document.createElement('div');
              div.style.border = '1px solid black';
              div.style.borderRadius = '0.5em';
              div.style.padding = '1em';
              for (let j = 1; j < matchTable[i].length; j++) {
                let divdiv = document.createElement('div');
                divdiv.textContent = header[j];
                divdiv.style.fontWeight = '700';
                divdiv.style.height = '1.5em';
                div.appendChild(divdiv);
                divdiv = document.createElement('div');
                divdiv.textContent = matchTable[i][j];
                divdiv.style.height = '1.5em';
                div.appendChild(divdiv);
              }
              log.appendChild(div);
            }
          }
        }
      }

      point_layer.addEventListener('click', function (event) {
        getCursorPosition(point_layer, event);
      })
    });
  </script>
  <style>
    body {
      font-family: 'Roboto', 'Noto Sans TC', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
      margin: 1em;
      font-weight: 400;
      width: 1316px;
    }

    button,
    select,
    input {
      font-family: 'Roboto', 'Noto Sans TC', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
      font-weight: 400;
    }

    #button {
      width: 1300px;
    }

    button {
      cursor: pointer;
      border-radius: 0.5em;
      border: none;
      background-color: rgba(221, 221, 221, 1);
    }

    input,
    select {
      height: 30px;
      padding: 0;
    }

    button:hover {
      background-color: rgba(221, 221, 221, 0.5);
    }

    body>div {
      margin: 1em 0 1em;
    }

    table {
      width: 1300px;
      border-collapse: collapse;
    }

    td {
      border: 1px solid black;
      text-align: center;
      vertical-align: middle;
    }

    button {
      padding: 1em;
    }

    .canvas {
      position: absolute;
      left: 1em;
    }

    .grid-container>div {
      margin: 1em 0 1em;
      display: none;
    }

    .grid-container>div>* {
      margin: 0.2em 0 0.2em;
    }

    #result>* {
      margin: 1em 0 1em;
    }

    #result {
      display: none;
    }

    #gridButton {
      width: 10em;
    }

    button:focus {
      outline: none;
    }

    #log {
      position: absolute;
      left: 1016px;
      border: 3px;
      -webkit-box-sizing: border-box;
      /* Safari/Chrome, other WebKit */
      -moz-box-sizing: border-box;
      /* Firefox, other Gecko */
      box-sizing: border-box;
      padding: 1em;
      display: inline-block;
      width: 300px;
      height: 1000px;
      overflow-y: scroll;
      border-color: black;
      border-style: solid;
    }

    #log>div {
      margin-bottom: 1em;
    }

    #table>tr:first-of-type>td:not(:first-of-type):hover {
      text-decoration: underline;
      cursor: pointer;
    }

    #point_layer {
      cursor: crosshair;
    }
  </style>
</head>

<body>
  <!--
    .grid-container {
      display: grid;
      grid-template-columns: 12.5% 12.5% 12.5% 12.5% 12.5% 12.5% 12.5% 12.5%;
    }

    .grid-container>div:not(:first-of-type) {
      margin-left: 1em;
    }

    .grid-container>div:not(:last-of-type) {
      margin-right: 1em;
    }
  -->
  <div id="description">
    <p>Data is from <a target="_blank"
        href="https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/edit#gid=1163096229">https://docs.google.com/spreadsheets/d/1RydjAEbYRZSyuKu3oFNqXz2J-vhO3b9VrYACItL_YrQ/edit#gid=1163096229</a><br>Feel
      free to add your locations if you find them to help others. Incomplete data is also acceptable.<br>The sea part is
      just blue(rgb(1, 55, 214)) background currently.<br>Some locations only unlock after reaching certain stages.
    </p>
    <p>First, select the Mode.<br>And enter the Value.<br>Then click the button.</p>
    <p>Search results will also be listed below the map.</p>
  </div>
  <div>
    <div><select id="Mode">
        <option value="Mode">Mode</option>
      </select></div>
    <div class="grid-container" id="Values">
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
      <div>
        <div></div><input>
      </div>
    </div>
  </div>
  <div><button id="button" style="display: none;">Click to generate map or refresh map</button></div>
  <button id="gridButton">show grid</button>
  <div>
    <canvas width=1 height=1000></canvas>
    <div id="log">Click Response:</div>
    <canvas class="canvas" id="map_layer" style="z-index: 0;"></canvas>
    <canvas class="canvas" id="grid_layer" style="z-index: 1; display: none;"></canvas>
    <canvas class="canvas" id="point_layer" style="z-index: 2;"></canvas>
  </div>
  <div id="result">
    <div>Search result: (click header to sort)</div>
    <table id="table"></table>
  </div>
</body>

</html>